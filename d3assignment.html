<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="d3/d3.min.js"></script>
		<title>Hello World</title>
	</head>
	<body>
		
		<script type="text/javascript">

			/* 
			 *	DATA
			 */
			var dataset = [5,10,15,20,25,30,30,25,20,15,10,5];
			var labels = ["a","b","c","d","e","f","g","h","i","j","k","l"];

			/* 
			 *	STATIC VALUES
			 */

			// width and height of svg
			var svgWidth = 500;
			var svgHeight = 500;

			// width of axis
			var yAxisWidth = 30;
			var xAxisHeight = 15;

			// space between bars
			var barPadding = 1;

			// space between diagram and axes
			var axisPadding = 2;

			// bar width
			var barWidth = 50;

			// bar height multiplication factor
			var heightFactor = 1;

			// width of diagram
			var diagramWidth = svgWidth - (yAxisWidth + axisPadding);
			var diagramHeight = svgHeight - xAxisHeight;

			/* 
			 *	DRAW SVG CONTAINER
			 */
			var svgContainer = d3.select("body")
				.append("svg")
				.attr("width", svgWidth)
				.attr("height", svgHeight);

			/* 
			 *	SCALES
			 */

			// add y scale
    		var yScale = d3.scale.linear()
    			.domain([0, d3.max(dataset, function(d) {
    				return d;
    			})])
    			.range([diagramHeight, 0]);	


			/* 
			 *	DRAW BARS
			 */
			svgContainer.selectAll("rect")
				.data(dataset)
				.enter()
				.append("rect")
				.attr("x", function(d, i) {
					// divide bars over total width of svgContainer
					return i * (diagramWidth / dataset.length) + yAxisWidth + axisPadding;
				})
				.attr("y", function(d) {
					// = height - data value
					return yScale(d) * heightFactor;
				})
				.attr("width", diagramWidth / dataset.length - barPadding)
				.attr("height", function(d) {
					// return just the data value
					return (diagramHeight - yScale(d)) * heightFactor;
				});

			/* 
			 *	ADD VALUE TO BARS
			 */
			svgContainer.selectAll("text")
				.data(dataset)
				.enter()
				.append("text")
				.text(function(d) {
					return d;
				})
				.attr("x", function(d, i) {
					// center label horizontally inside bar
					return i * (diagramWidth / dataset.length) + (diagramWidth / dataset.length - barPadding) / 2 + yAxisWidth;
				})
				.attr("y", function(d) {
					// = height - data value
					return yScale(d) * heightFactor + 15;
				})
				.attr("font-family", "sans-serif")
			    .attr("font-size", "11px")
			    .attr("fill", "white")
			    .attr("text-anchor", "middle");

			/* 
			 *	ADD LABELS UNDERNEATH BARS
			 */
			svgContainer.selectAll("label")
				.data(labels)
				.enter()
				.append("text")
				.text(function(d) {
					return d;
				})
				.attr("x", function(d, i) {
					// center label horizontally inside bar
					return i * (diagramWidth / dataset.length) + (diagramWidth / dataset.length - barPadding) / 2 + yAxisWidth;
				})
				.attr("y", function(d) {
					return diagramHeight + xAxisHeight - 5;
				})
				.attr("font-family", "sans-serif")
			    .attr("font-size", "11px")
			    .attr("text-anchor", "middle");

		    /* 
			 *	CREATE Y AXIS
			 */

		    // create y axis
			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient("left")
				.ticks(5);

			// call y axis
			svgContainer.append("g")
				.attr("class", "axis")
				.attr("transform", "translate(" + yAxisWidth + ",0)")
				.call(yAxis);

		</script>
	</body>
</html>

<style type="text/css">
	div.bar {
		display: inline-block;
		width: 20px;
		height: 75px;
		margin-right: 2px;
		background-color: teal;
	}

	.axis path,
	.axis line {
		fill: none;
		stroke: black;
		shape-rendering: crispEdges;
	}

	.axis text {
	    font-family: sans-serif;
	    font-size: 11px;
	}	

</style>
